<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes"/>
<link rel="apple-touch-icon" href="icon.png">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-indigo.css">
    
<head><title>Airport Reserve</title></head>
    
<body>
    
<header class="w3-container w3-card-4 w3-theme">
  <h1>Airport Reserve Pay/Credit Calculator</h1>
</header>
     
<div>
    <br>
    <h5>Enter BLOCK IN time and press button:</h5>
    <input id="time" type="time"><br>
<button id="calc">Calculate</button><br>
    </div>    
<br>
    <div id="intro" style='font-weight:bold';></div>
    <div id="pay"></div><br>  
    <div id="results"></div>
    <div id="results2"></div>
    <div id="results3"></div><br>
    <div id="quote"></div>
    
<script>

 var calc = document.getElementById("calc")
 
calc.addEventListener("click", function() {
    
    document.getElementById("intro").innerHTML = "Total Pay and Credit:";
    
    //get user input in-time, convert to js date
    var time = document.getElementById("time").value;
    var in_time = new Date("2023-01-01" +" "+ time);
      
    //add 15 min to in-time to get off duty time
    var plus15 = new Date(in_time.getTime() + 15*60000); //js uses milliseconds so 15*60000 = 15 min
   
    //grab hours and minutes from off duty time to do some math
    var hour = plus15.getHours();
    var min = plus15.getMinutes();
    
    function padTo2Digits(num) {return num.toString().padStart(2, '0');}   //makes hours and minutes look like HH:MM
    
    //compute duty day from 1000 in minutes
    var duty = (hour * 60 + min) - 600   
    let h = Math.floor(duty / 60); 
    let m = duty % 60;
    var duty_day = `${padTo2Digits(h)}:${padTo2Digits(m)}`;
    
    //compute 60% duty rig 
    var rig = Math.max(300, (duty * .6)); //60% duty rig or 5:00, whichever higher
    const h2= Math.floor(rig / 60); 
    const m2 = Math.round(rig % 60);
    var rig_pay = `${padTo2Digits(h2)}:${padTo2Digits(m2)}`;
    
    //Calculate minutes on duty past 1800
    var m4m = Math.max(0, (duty - 480));
    let h3 = Math.floor(m4m / 60); 
    let m3 = Math.round(m4m % 60);
    var m4m_pay = `${padTo2Digits(h3)}:${padTo2Digits(m3)}`;
    
    //show me the money
    var pay = m4m + rig;
    let h4= Math.floor(pay / 60); 
    let m4 = Math.round(pay % 60);
    var pay_all = `${padTo2Digits(h4)}:${padTo2Digits(m4)}`;
         if (pay <= 300) {                                       //5 hours (in minutes)
             document.getElementById("pay").innerHTML = "5:00";
             document.getElementById("results").innerHTML = "You are getting the Airport Reserve Minimum daily guarantee."; 
             document.getElementById("results2").innerHTML = "";          
             document.getElementById("results3").innerHTML = "";
             document.getElementById("quote").innerHTML = "'I left the library for THIS?' -R.C.";
  //           document.getElementById("quote").innerHTML = "'Well, we tried, didn't we?' -Tim Dobbins";
   //          document.getElementById("quote").innerHTML = "'I'm the guy who can get if for you...damn near anything within reason.' -Ed Wong" 
    }  else {
            document.getElementById("pay").innerHTML = `${padTo2Digits(h4)}:${padTo2Digits(m4)}`;
            document.getElementById("results").innerHTML = "Duty Rig 60% of " + `${padTo2Digits(h)}:${padTo2Digits(m)}` + " (Min 5): "+ rig_pay; 
            document.getElementById("results2").innerHTML = " plus 'Minute for Minute' (DEXT): " + m4m_pay;          
            document.getElementById("results3").innerHTML = "Total = " + pay_all;
            document.getElementById("quote").innerHTML = "'Cha-CHING, Baby' -Marc DeRego";
    ;
    }
 
 
})
    
    
</script>

    
</body> 
</html>



