<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserve Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #0077cc;
        }
        .pdf-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #0077cc;
            color: #ffffff;
            text-decoration: none;
            border-radius: 5px;
        }
        .pdf-link:hover {
            background-color: #005999;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Reserve Links</h1>
    <div id="pdf-container">Loading...</div>
    <div id="error-message" class="error"></div>

    <script>
        // Function to get today's date in the correct format DDMMMYY
        function getFormattedDate(date) {
            const days = String(date.getDate()).padStart(2, '0');  
            const month = date.toLocaleString('default', { month: 'short' }).toUpperCase(); 
            const year = String(date.getFullYear()).slice(-2);         
            return `${days}${month}${year}`; 
        }

        // Function to check if a PDF exists
        async function pdfExists(url) {
            try {
                const response = await fetch(url, { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                console.error('Error checking PDF existence:', error);
                return false;
            }
        }

        // Function to display the PDF link
        async function displayPDFLink() {
            const today = new Date();
            const tomorrow = new Date();
            tomorrow.setDate(today.getDate() + 1);

            const formattedToday = getFormattedDate(today);
            const formattedTomorrow = getFormattedDate(tomorrow);

            const pdfUrlToday = `https://hawaiianair.sharepoint.com/sites/flightoperations/Daily%20Flight%20Schedules/${formattedToday}-PI PAX RSV LIST.PDF`;
            const pdfUrlTomorrow = `https://hawaiianair.sharepoint.com/sites/flightoperations/Daily%20Flight%20Schedules/${formattedTomorrow}-PI PAX RSV LIST.PDF`;

            const pdfContainer = document.getElementById('pdf-container');
            const errorMessage = document.getElementById('error-message');

            // Check if today’s PDF exists
            if (await pdfExists(pdfUrlToday)) {
                pdfContainer.innerHTML += `
                    <a href="${pdfUrlToday}" target="_blank" class="pdf-link">Today</a>
                `;
            } else {
                errorMessage.innerHTML += 'Today\'s PDF is unavailable.<br>';
            }

            // Check if tomorrow’s PDF exists
            if (await pdfExists(pdfUrlTomorrow)) {
                pdfContainer.innerHTML += `
                    <a href="${pdfUrlTomorrow}" target="_blank" class="pdf-link">Tomorrow</a>
                `;
            } else {
                errorMessage.innerHTML += 'Tomorrow\'s PDF is unavailable.<br>';
            }
        }

        // Call the function to display the PDF link on page load
        displayPDFLink();
    </script>
</body>
</html>
