<!DOCTYPE html>
<html>
<head>
    <title>Daily Flight Schedules</title>
    <style>
        /* Add some basic styling to the page */
        body {
            font-family: Arial, sans-serif;
        }
        
        #doc {
            width: 200px;
        }
        
        #datepicker {
            width: 200px;
        }
    </style>
</head>
<body>
    <h1>Daily Flight Schedules</h1>
    
    <select id="doc">
        <option value="">Select a document:</option>
        <option value="RSV">PI Pax RSV List</option>
        <option value="REC">PI RCL List</option>
        <option value="DFS">787 DFSH</option>
        <option value="VAC2024">2024 Vacation Availability</option>
        <option value="VAC2025">2025 Annual Vacation Bidding</option>
    </select>
    
    <input type="date" id="datepicker">
    
    <button id="today-button" style="display: none;">Today</button>
    <button id="tomorrow-button" style="display: none;">Tomorrow</button>
    
    <script>
        const docSelect = document.getElementById('doc');
        const datePicker = document.getElementById('datepicker');
        const pdfBaseUrl = 'https://hawaiianair.sharepoint.com/sites/flightoperations/Daily%20Flight%20Schedules/';
        
        datePicker.style.display = 'block'; // Show date picker by default
        
        // Function to get formatted date for URL
        function getFormattedDateForUrl(date) {
            const days = String(date.getDate()).padStart(2, '0');
            const month = date.toLocaleString('default', { month: 'short' }).toUpperCase();
            const year = String(date.getFullYear()).slice(-2);
            return `${days}${month}${year}`;
        }
        
        function displayDate() {
            const today = new Date();
            const hawaiiTime = new Date(today.toLocaleString("en-US", { timeZone: "Pacific/Honolulu" }));
            const isAfter1600HST = hawaiiTime.getHours() >= 16;
            
            const tomorrowButton = document.getElementById('tomorrow-button');
            if (isAfter1600HST) {
                tomorrowButton.style.display = 'block';
                tomorrowButton.onclick = function() {
                    const tomorrowDate = new Date();
                    tomorrowDate.setDate(today.getDate() + 1);
                    const pdfUrl = `${pdfBaseUrl}${getFormattedDateForUrl(tomorrowDate)}-PI PAX RSV LIST.PDF`;
                    window.open(pdfUrl, '_blank');
                };
            }
            
            document.getElementById('today-button').onclick = function() {
                const pdfUrl = `${pdfBaseUrl}${getFormattedDateForUrl(today)}-PI PAX RSV LIST.PDF`;
                window.open(pdfUrl, '_blank');
            };
            
            // Display the date picker by default
            datePicker.style.display = 'block';
        }
        
        displayDate();
        
        datePicker.addEventListener('change', function() {
            const selectedDoc = docSelect.value;
            const hawaiiDate = new Date(this.value);
            
            // Determine the PDF link based on selection
            let pdfUrl = '';
            const formattedDate = getFormattedDateForUrl(hawaiiDate);
            
            if (selectedDoc === "RSV") {
                pdfUrl = `${pdfBaseUrl}${formattedDate}-PI PAX RSV LIST.PDF`;
            } else if (selectedDoc === "REC") {
                pdfUrl = `${pdfBaseUrl}${formattedDate}-PI RCL LIST.PDF`;
            } else if (selectedDoc === "DFS") {
                pdfUrl = `${pdfBaseUrl}${formattedDate}-787 DFSH.PDF`;
            } else if (selectedDoc === "VAC2024") {
                window.open("https://hawaiianair.sharepoint.com/sites/flightoperations/CrewPlanning/Vacation/2024%20Vacation%20Availability/787ca2024.pdf", '_blank');
                docSelect.selectedIndex = 0; // Reset to the first option
            } else if (selectedDoc === "VAC2025") {
                window.open("https://hawaiianair.sharepoint.com/sites/flightoperations/CrewPlanning/Vacation/2025%20Annual%20Vacation%20Bidding/787ca2025.pdf", '_blank');
                docSelect.selectedIndex = 0; // Reset to the first option
            }
            
            // Open the PDF
            if (pdfUrl) {
                window.open(pdfUrl, '_blank');
                docSelect.selectedIndex = 0; // Clear selection after opening
            }
        });
        
        docSelect.addEventListener('change', function() {
            const selectedDoc = this.value;
            const hawaiiDate = new Date(datePicker.value);
            
            // Determine the PDF link based on selection
            let pdfUrl = '';
            const formattedDate = getFormattedDateForUrl(hawaiiDate);
            
            if (selectedDoc === "RSV") {
                pdfUrl = `${pdfBaseUrl}${formattedDate}-PI PAX RSV LIST.PDF`;
            } else if (selectedDoc === "REC") {
                pdfUrl = `${pdfBaseUrl}${formattedDate}-PI RCL LIST.PDF`;
            } else if (selectedDoc === "DFS") {
                pdfUrl = `${pdfBaseUrl}${formattedDate}-787 DFSH.PDF`;
            }
            
            // Open the PDF
            if (pdfUrl) {
                window.open(pdfUrl, '_blank');
                docSelect.selectedIndex = 0; // Clear selection after opening
            }
        });
    </script>
</body>
</html>
